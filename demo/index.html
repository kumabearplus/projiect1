<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>首页</title>
  <link rel="stylesheet" type="text/css" href="./dist/css/index-merge.css">
</head>
<body>
  <div id="navbar">
  	<div class="ct">
  	  <div class="logo">
  	  	<span></span>
  	  	<a href="#">妹抖龙</a>
  	  </div>
  	  <div class="reference">
  	  	<li class="active"><a href="#header">官网首页</a></li>
  	  	<li><a href="#main-role">主要角色</a></li>
  	  	<li><a href="#minor-role">次要角色</a></li>
  	  	<li><a href="#fully-day">搞笑日常</a></li>
  	  	<li><a href="#content-us">联系我们</a></li>
  	  </div>
  	</div>
  </div>
  <div id="header">
<!--   	<div class="ct-1">
  	  <div class="introduce">
  	  	<div class="welcome">欢迎来到妹抖龙的世界</div>
        <div class="theme">IT'S NICE TO MEET YOU</div>
        <a href="#">FOLLOW ME</a>
  	  </div>
    </div> -->
    <div class="carousel">
      <div class="introduce">
        <div class="welcome">欢迎来到妹抖龙的世界</div>
        <div class="theme">IT'S NICE TO MEET YOU</div>
        <a href="#">FOLLOW ME</a>
      </div>
      <ul class="img-ct">
        <li data-id='0'><a href="#"><img src="./dist/imgs/1.jpg"></a></li>
        <li data-id='1'><a href="#"><img src="./dist/imgs/2.jpg"></a></li>
        <li data-id='2'><a href="#"><img src="./dist/imgs/3.jpg"></a></li>
        <li data-id='3'><a href="#"><img src="./dist/imgs/4.jpg"></a></li>
      </ul>
      <a class="btn btn-pre" href="#">&lt;</a>
      <a class="btn btn-next" href="#">&gt;</a>
      <ul class="bullet">
        <li class="active"><div class="bullet-prev"><img src="./dist/imgs/1.jpg"></div></li>
        <li><div class="bullet-prev"><img src="./dist/imgs/2.jpg"></div></li>
        <li><div class="bullet-prev"><img src="./dist/imgs/3.jpg"></div></li>
        <li><div class="bullet-prev"><img src="./dist/imgs/4.jpg"></div></li>
      </ul>
    </div>
  </div>
  <div id="main-role">
    <div class="main-ct">
      <h1>主要角色</h1>
      <div class="main-role-1">
        <img src="./dist/imgs/5.jpg">
        <h2>小林</h2>
        <p>喜爱女仆的单身辛苦程序员（普通人类女性）。使用开发语言为python。有着让人难以想象是25岁的沉稳淡泊性格。然而一旦提起女仆的事情就会变得热情，即使醉酒，关于女仆的谈论也不绝于口。对于工作并没有多强的自豪感和执着，不过是个能够完成超出常人工作量的优秀之人。感情细腻但不善言辞，不过别人几乎都能感受到她那细腻的感情。对托尔有着超乎一般的感情（≥爱情），为了托尔甚至可以赌上性命，为了托尔甚至不怕自己的世界被侵略，只要有托尔在她身边，什么都无所谓。腰痛是其烦恼的根源。</p>
      </div>
      <div class="main-role-2">
        <img src="./dist/imgs/6.jpg">
        <h2>托尔</h2>
        <p>超喜欢小林（≥痴迷），来自另一个世界的龙娘。可以利用魔法变成人类的样子。偶然被小林所救，被小林所感动，喜欢上了小林（痴迷），并作为小林家的女仆而开始住在小林家。女仆的身份是出于小林的希望。为了回报小林，可以付出任何代价，甚至自己的身体。外表可爱，但本质上是龙，因此基本上会蔑视人类，但后期习惯了生活就不怎么蔑视了。但只有小林是特别的。</p>
      </div>
    </div>
  </div>
  <div id="minor-role">
    <h1>次要角色</h1>
    <p>排名不分先后</p>
    <div class="page-bg">
      <ul class="ct">
        <li>
          <a href="#">
            <img src="./dist/imgs/7.jpg">
          </a>
          <div class="summary">
            <h4>康娜</h4>
            <p>追着托尔现身的龙娘。名字カンナカムイ直译是神奈神威，康娜卡姆依为音译。喜欢恶作剧，有些怕寂寞的我行我素型。无法凭借自己的力量回到原先的世界，而开始住在小林家。电是力量的来源，可以把尾巴的尖端插到插座上充电。好奇心旺盛，喜欢吃东西，只要是看上去可以吃的东西先送到嘴里再说。有很强的性欲，但由于在龙族里还小，只能表现在食欲上。</p>
          </div>
        </li>
        <li>
          <a href="#">
            <img src="./dist/imgs/8.jpg">
          </a>
          <div class="summary">
            <h4>艾露玛</h4>          
            <p>与托尔关系恶劣的龙娘（敌对势力）。与托尔不同，追求与人类的和谐共处，性格正直而严格。与此相反，脑子不太灵光，遇事容易信以为真，这方面常受到托尔的戏弄。虽然总是执着于身为龙的规范，不过一旦收到美味的食物，就会许可大部分的事情。</p>
          </div>
        </li>
        <li>
          <a href="#">
            <img src="./dist/imgs/9.jpg">
          </a>
          <div class="summary">
            <h4>尔科亚</h4>
            <p>从远古时代开始就住在人类世界的龙娘（其实是阿兹特克人的统治之神，也就是羽蛇神）。本名是魁札尔科亚特尔。谨慎地守护着托尔等人，像是温柔的姐姐一般的存在。基本上都在一边俯瞰着世间，一边为了维持两个世界的平衡而操劳。龙娘中的第一巨乳，由于穿衣服经常会露出度很高而为难。</p>
          </div>
        </li>
        <li>
          <a href="#">
            <img src="./dist/imgs/10.jpg">
          </a>
          <div class="summary">
            <h4>法夫纳</h4>
            <p>托尔的朋友。在另一个世界守护着洞窟的财宝。见过企图夺取财宝的卑劣人类，而和托尔一样最初很讨厌人类。经常抱持着如同憎恨一般的感情，对任何事物都采取冷淡而怀疑的态度。住在泷谷真家，沉迷于游戏（一天在线21小时），与泷谷真接触和相处后，对人类的态度略微缓和，傲娇。</p>
          </div>
        </li>
        <li>
          <a href="#">
            <img src="./dist/imgs/11.jpg">
          </a>
          <div class="summary">
            <h4>泷谷真</h4>
            <p>小林在公司的同事。勤于工作的爽朗帅气青年，但实际上是个重度阿宅。偶尔邀请小林去喝酒并大谈御宅话题是他消除压力的方法。通过戴上圈圈眼镜来区分平常的自己和身为阿宅的自己。有着即使见到龙也不为所动的胆量。</p>
          </div>
        </li>
      </ul>
    </div>
  </div>
  <div id="fully-day">
    <div class="fully-ct">
      <h1>搞笑日常</h1>
      <ul class="every-day">
        <li>
          <img src="./dist/imgs/1.gif">
          <h3>日常一</h3>
          <a href="#"><span class="iconfont">&#xe60a; </span></a>
          <a href="#"><span class="iconfont">&#xe661; </span></a>
          <a href="#"><span class="iconfont">&#xe6ae; </span></a>
        </li>
        <li>
          <img src="./dist/imgs/2.gif">
          <h3>日常二</h3>
          <a href="#"><span class="iconfont">&#xe60a; </span></a>
          <a href="#"><span class="iconfont">&#xe661; </span></a>
          <a href="#"><span class="iconfont">&#xe6ae; </span></a>
        </li>
        <li>
          <img src="./dist/imgs/3.gif">
          <h3>日常三</h3>
          <a href="#"><span class="iconfont">&#xe60a; </span></a>
          <a href="#"><span class="iconfont">&#xe661; </span></a>
          <a href="#"><span class="iconfont">&#xe6ae; </span></a>
        </li>
        <li>
          <img src="./dist/imgs/4.gif">
          <h3>日常四</h3>
          <a href="#"><span class="iconfont">&#xe60a; </span></a>
          <a href="#"><span class="iconfont">&#xe661; </span></a>
          <a href="#"><span class="iconfont">&#xe6ae; </span></a>
        </li>
        <li>
          <img src="./dist/imgs/5.gif">
          <h3>日常五</h3>
          <a href="#"><span class="iconfont">&#xe60a; </span></a>
          <a href="#"><span class="iconfont">&#xe661; </span></a>
          <a href="#"><span class="iconfont">&#xe6ae; </span></a>
        </li>
        <li>
          <img src="./dist/imgs/6.gif">
          <h3>日常六</h3>
          <a href="#"><span class="iconfont">&#xe60a; </span></a>
          <a href="#"><span class="iconfont">&#xe661; </span></a>
          <a href="#"><span class="iconfont">&#xe6ae; </span></a>
        </li>
        
      </ul>
      <div class="img-ct"></div>
      <button class="btn">加载更多</button>
    </div>
  </div>
  <div id="content-us">
    <div class="user-info">
      <h1>联系我们</h1>
      <p>let's share funny</p>
      <div class="form">
        <div class="user">
          <input type="text" name="YOUR NAME" placeholder="YOUR NAME">
          <input type="text" name="YOUR NAME" placeholder="YOUR NAME">
          <input type="text" name="YOUR NAME" placeholder="YOUR NAME">
        </div>
        <div class="advice">
          <textarea type="textarea" name="YOUR ADVICE" placeholder="YOUR ADVICE"></textarea>
        </div>
        <div class="submit">
          <input type="submit" name="submit" value="提交">
        </div>
      </div >
    </div>
  </div>
  <div id="footer">
    <div class="footer-copy">
      <span>Copyright © KumaBear 2017</span>
    </div>
    <div class="footer-share">
      <a href="#"><span class="iconfont">&#xe60a; </span></a>
      <a href="#"><span class="iconfont">&#xe661; </span></a>
      <a href="#"><span class="iconfont">&#xe6ae; </span></a>
    </div>
    <div class="footer-join">
      <a href="#">加入我们</a>
      <a href="#">联系我们</a>
    </div>
  </div>
  <script src='./dist/js/merge.js'></script>
<!--   <script src='jquery/jquery-3.2.1.min.js'></script>
  <script type="text/javascript">

    var Carousel = (function(){
      function _Carousel($ct){
        this.$ct = $ct
        this.init()
        this.bind()
      }
      _Carousel.prototype = {
        init: function(){
          var $imgCt = this.$imgCt = this.$ct.find('.img-ct')
          var $btnPre = this.$btnPre = this.$ct.find('.btn-pre')
          var $btnNext = this.$btnNext = this.$ct.find('.btn-next')
          var $bullet = this.$bullet = this.$ct.find('.bullet')
          var $firstImg = this.$firstImg = $imgCt.find('li').first()
          var $lastImg = $imgCt.find('li').last()
          var imgLength = this.imgLength = $imgCt.children().length
          var curPageIndex = this.curPageIndex = 0
          var isAnimate = this.isAnimate = false

          $imgCt.prepend($lastImg.clone())
          $imgCt.append($firstImg.clone())
          $imgCt.width($firstImg.width()*$imgCt.children().length)
          $imgCt.css('left',0-$firstImg.width())

        },
        bind: function(){
          var _this = this
          this.$btnPre.on('click',function(e){
            e.preventDefault()
            _this.playPre()
            
          })
          this.$btnNext.on('click',function(e){
            e.preventDefault()
            _this.playNext()
            
          })
          this.$bullet.find('li').on('click',function(){
            var index = $(this).index()
            _this.play(index)
            _this.setBullet()
            // console.log(index)
          })
        },
        playPre: function(){
          var _this = this
          if (this.isAnimate)return
          this.isAnimate = true
          this.$imgCt.animate({
            left: '+='+this.$firstImg.width()
          },function(){
            _this.curPageIndex--
            if (_this.curPageIndex < 0) {
              _this.$imgCt.css('left',0-(_this.imgLength*_this.$firstImg.width()))
              _this.curPageIndex = _this.imgLength-1
            }
            _this.isAnimate = false
            _this.setBullet()

          })
        },
        play: function(idx){
          var _this = this
          if (this.isAnimate)return
          this.isAnimate = true
          this.$imgCt.animate({
            left: '+='+this.$firstImg.width()*(this.curPageIndex-idx)
            
          },function(){
            _this.curPageIndex = idx
            _this.isAnimate = false
            _this.setBullet()
          })
        },
        playNext: function(){
          var _this = this
          if (this.isAnimate)return
          this.isAnimate = true
          this.$imgCt.animate({
            left: '-='+this.$firstImg.width()
          },function(){
            _this.curPageIndex++
            if (_this.curPageIndex === _this.imgLength) {
              _this.$imgCt.css('left',0-_this.$firstImg.width())
              _this.curPageIndex = 0
            }
            _this.isAnimate = false
            _this.setBullet()
          })
        },
        setBullet: function(){
          this.$bullet.children()
                 .removeClass('active')
                 .eq(this.curPageIndex)
                 .addClass('active')
        }

      }
      return {
        init: function($ct){
          $ct.each(function(idx,node){
            new _Carousel($(node))
          })
          
        }
      }
    })()
    Carousel.init($('.carousel'))

    var Exposure = (function(){
      function _Exposure($ct){
        this.$ct = $ct
        this.init()
        this.bind()
      }
      _Exposure.prototype = {
        init: function(){
          var $picCt = this.$picCt = this.$ct.children('div').not('#navbar,#footer')
          var $active = this.$active = this.$ct.children('div').first().find('li')
        },
        bind: function(){
          var _this = this
          // this.$picCt.each(function(){
            
          //   console.log(this)
          //   if (_this.isVisible($(this))) {
          //     var index = $(this).index()
          //     _this.$active.eq(index).add('active')
          //   }
          // })

          $(window).on('scroll',function(){
            _this.$picCt.each(function(){
              // $(this).siblings().removeClass('active')
              // $(this).addClass('active')


              if (_this.isVisible($(this))) {
                var index = $(this).index()-1
                
                // console.log(this)

                _this.$active.removeClass('active')
                _this.$active.eq(index).addClass('active')
              }
            })

          })
        },

        isVisible: function($node){
          var windowHeight = $(window).height()
          var offsetTop = $node.offset().top
          var scrollTop = $(window).scrollTop()
          var nodeHeight = $node.outerHeight(true)
          if (scrollTop<offsetTop+nodeHeight&&scrollTop>offsetTop-windowHeight) {
            return true
          } else {
            return false
          }
        }

      }
      return {
        init: function($ct){
          new _Exposure($ct)
        }
      }
    })()
    Exposure.init($('body'))
    var GoTop = (function(){
          function _GoTop($ct){
            this.$ct = $ct
            this.target = $('<button class="btn">回到顶部</button>')
            this.target.css({
              position: 'fixed',
              right: '50px',
              bottom: '50px',
              display: 'none',
              padding: '10px 5px'
            })
            this.createNode()
            this.bindEvent()
          }
          _GoTop.prototype = {
            createNode: function(){
              this.$ct.append(this.target)
            },
            bindEvent: function(){
              var _this = this
              $(window).on('scroll',function(){
                if ($(window).scrollTop()>100) {
                  _this.target.css('display','block')
                } else{
                  _this.target.css('display','none')
                }
              })
              this.target.on('click',function(){
                $(window).scrollTop(0)
              })
            }
      
          }
          return {
            init: function($ct){
              new _GoTop($ct)
            }
          }
        })()
    GoTop.init($('#footer'))
    var Barrels = (function(){
      function _Barrels($ct,num){
        this.$ct = $ct
        this.num = num
        this.rowList = []        
        this.loadImg()
      }

      _Barrels.prototype = {
        loadImg: function(){
          var num = this.num
          var imgsUrl = this.getImgUrls(num)
          // console.log(imgsUrl)
          // imgs.push(this.getImgUrls(10))
          var _this = this

          for (var i = 0; i < imgsUrl.length; i++) {
            !function(){
              var img = new Image()
              img.src = imgsUrl[i]
              
              img.onload = function(){
                var imgInfo = {
                  target: this,
                  height: 200,
                  width: 200*(this.width/this.height)
                }
                console.log(this)
                // this.height = 200
                // img.width = 200*(img.width/img.height)
                // console.log(img.width)
                _this.render(imgInfo)
                // console.log(imgInfo)

              }
            }()
          }
        },
        getImgUrls: function(num){
          var urls = [];
          for (var i = 0; i<num ;i++){
            src = 'https://unsplash.it/'+parseInt(Math.random()*100+400)+'/'+parseInt(Math.random()*100+200)+'/?random'
            urls.push(src)
          }
          return urls;
          // var width,height,urls = []
          // for (var i = 0; i < num; i++) {
          //   width = Math.floor(Math.random()*100+200)
          //   height = Math.floor(Math.random()*100+100)
          //   urls.push('https://unsplash.it/'+ width+'/'+height+'/?random')
          // }
          // return urls
        },
        render: function(imgInfo){
          // console.log(imgInfo)
          var clientWidth = this.$ct.width()
          console.log(clientWidth)
          var rowWidth = 0
          var rowHeight = 0
          // var lastImgInfo = imgInfo
          this.rowList.push(imgInfo)

          for (var i = 0; i < this.rowList.length; i++) {
            rowWidth = rowWidth+this.rowList[i].width
            clientWidth -=10
          }
          // console.log(this.rowList)
          if (rowWidth>clientWidth) {
            clientWidth +=10
            rowWidth -= imgInfo.width
            this.rowList.pop()
            var newRowHeight = 200*(clientWidth/rowWidth)
            this.layOut(newRowHeight)
            this.rowList = []
            this.rowList.push(imgInfo)
            // rowWidth = lastImgInfo.width
          }
          
        },
        layOut: function(newRowHeight){
          // var $imgCt = $('<div class="img-ct"></div>')
          var $imgArr = $('<div class="img-arr"></div>')
          $.each(this.rowList,function(idx,imgInfo){
            
            var $img = $(imgInfo.target)
            $img.height(newRowHeight)

            // this.height = newRowHeight
            console.log(this)
            $imgArr.append($img)
            
            console.log('-------')
            // console.log($img)
            // $imgCt.append($imgArr)

          })
          // $imgCt.append($imgArr)
          this.$ct.append($imgArr)
          console.log(this.$ct)

        }
      }
      return {
        init: function($ct,num){
          new _Barrels($ct,num)
        }
      }
    })()
    Barrels.init($('#fully-day .img-ct'),6)
    $('.btn').on('click',function(){
      Barrels.init($('#fully-day .img-ct'),6)
    })
  </script> -->
</body>
</html>